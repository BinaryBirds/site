<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="canonical" href="">
    <link rel="prev" href="http://127.0.0.1:3000/blog/beginners-guide-to-swift-macros/">
    <link rel="next" href="http://127.0.0.1:3000/blog/beginners-guide-to-swift-macros/">
    
    <title>How to write OpenAPI specs using Swift and OpenAPIKit? - Binary Birds</title>
    <meta name="description" content="In this tutorial I&#39;ll show you how to build OpenAPI 3.0+ specifications efficiently using Swift &amp; OpenAPIKit.">
    
    <meta property="og:url" content="http://127.0.0.1:3000/blog/how-to-write-openapi-specs-using-swift-and-openapi-kit/">
    <meta property="og:title" content="How to write OpenAPI specs using Swift and OpenAPIKit? - Binary Birds">
    <meta property="og:description" content="In this tutorial I&#39;ll show you how to build OpenAPI 3.0+ specifications efficiently using Swift &amp; OpenAPIKit.">
    

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to write OpenAPI specs using Swift and OpenAPIKit? - Binary Birds">
    <meta name="twitter:description" content="In this tutorial I&#39;ll show you how to build OpenAPI 3.0+ specifications efficiently using Swift &amp; OpenAPIKit.">
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&display=swap">

    <link rel="stylesheet" href="http://127.0.0.1:3000/css/modern-normalize.css">
    <link rel="stylesheet" href="http://127.0.0.1:3000/css/modern-base.css">
    <link rel="stylesheet" href="http://127.0.0.1:3000/css/variables.css">
    <link rel="stylesheet" href="http://127.0.0.1:3000/css/base.css">
    <link rel="stylesheet" href="http://127.0.0.1:3000/css/grid.css">
    <link rel="stylesheet" href="http://127.0.0.1:3000/css/navigation.css">
    <link rel="stylesheet" href="http://127.0.0.1:3000/css/footer.css">
    <link rel="stylesheet" href="http://127.0.0.1:3000/css/style.css">

    
    
    <link rel="icon" href="/icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/icons/icon-320.png" type="image/png">
    
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">

    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
        media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
        media="(prefers-color-scheme: dark)"
    >

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KQCKHXQ8');</script>
    <!-- End Google Tag Manager -->
</head>

<body>
    <div id="navigation-container">
        <header id="navigation" class="wrapper">
            <a href="http://127.0.0.1:3000/">
                <picture>
                    <source
                        srcset="http://127.0.0.1:3000/images/logos/logo~dark.png"
                        media="(prefers-color-scheme: dark)"
                        >
                    <img
                        src="http://127.0.0.1:3000/images/logos/logo.png"
                        alt="Logo of Binary Birds"
                        title="Binary Birds"
                        >
                </picture>
            </a>
            <nav>
                <input type="checkbox" id="primary-menu-button" name="menu-button" class="menu-button">
                    <label for="primary-menu-button">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </label>
                    <div class="menu-items">
                        <a href="/development/">Development</a>
                    <a href="/consulting/">Consulting</a>
                    <a href="/blog/">Blog</a>
                    <a href="/contact/">Contact</a>
                    </div>
            </nav>
        </header>
    </div>
    

    <main id="page-container">
    <div class="wrapper">
    <div class="article-with-toc">
        <div>
            <article>
                <header>
    
                    <div class="meta">
                        <time datetime="2023-07-06 16:15:54">2023-07-06 16:15:54</time>
                         &middot; <span class="reading-time">9 min read</span>
                    </div>
                    
                    <h1>How to write OpenAPI specs using Swift and OpenAPIKit?</h1>
                    <p>In this tutorial I&#39;ll show you how to build OpenAPI 3.0+ specifications efficiently using Swift &amp; OpenAPIKit.</p>
                </header>
    
                <section>
                    <h2 id="getting-started">Getting started</h2><p>Have you ever written an OpenAPI spec using YAML / JSON files? Well, I have created several documents and I had some problems with those formats. My main issue is that I constantly want to separate components, and I always end up using standalone files for those. This sounds fine, but if you decompose everything, including parameters, responses and other stuff it can cause some issues when you host your documentation online. The <a href="https://github.com/swagger-api/swagger-ui" target="_blank">SwaggerUI</a> library renders the documentation extremely slow when it has to pull the specification from multiple source files. One possible solution is to combine your spec into a large <code>swagger.json</code> file, there are some tools for this purpose, but lately Iâ€™ve discovered an alternativeâ€¦ using Swift & the <a href="https://github.com/mattpolzin/OpenAPIKit" target="_blank">OpenAPIKit</a> library. ðŸ“¦</p><hr><p>This tutorial is a practical walkthrough, but you can also download the <a href="https://github.com/binarybirds/swagger-petstore" target="_blank">sample repository from GitHub</a> right away.</p><hr><p>Letâ€™s get started with a new Swift package, you can setup the project using the following <code>Package.swift</code> file:</p><pre><code class="language-swift">// swift-tools-version: 5.8
import PackageDescription

let package = Package(
    name: "swagger-petstore",
    platforms: [
        .macOS(.v10_15),
    ],
    dependencies: [
        .package(
            url: "https://github.com/mattpolzin/OpenAPIKit",
            from: "3.0.0-alpha.8"
        ),
        .package(
            url: "https://github.com/jpsim/Yams",
            from: "5.0.6"
        ),
    ],
    targets: [
        .executableTarget(
            name: "SwaggerPetstore",
            dependencies: [
                .product(name: "OpenAPIKit30", package: "OpenAPIKit"),
                .product(name: "Yams", package: "Yams"),
            ]
        )
    ]
)
</code></pre><p>We just need a simple executable target that will serve as a generator, to build our swagger files. Anyway, working with OpenAPIKit is not that hard, but for me itâ€™s a bit more easy to reference components by using the following extensions. Feel free to place them inside a <code>OpenAPI+Extensions.swift</code> file somewhere inside your project.</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30
import OpenAPIKitCore

extension OpenAPI.Content {

    static func ref(_ name: String) -&gt; Self {
        .init(schemaReference: .internal(.component(name: name)))
    }
}

extension JSONSchema {

    static func ref(_ name: String) -&gt; JSONSchema {
        .reference(.component(named: name))
    }
}

extension Either&lt;JSONReference&lt;OpenAPI.Parameter&gt;, OpenAPI.Parameter&gt; {

    static func ref(_ name: String) -&gt; Self {
        Self.reference(.component(named: name))
    }
}

extension Either&lt;JSONReference&lt;OpenAPI.Response&gt;, OpenAPI.Response&gt; {

    static func ref(_ name: String) -&gt; Self {
        Self.reference(.component(named: name))
    }
}
</code></pre><p>The next thing that weâ€™re going to create is the <code>Server</code> namespace, this will contain some generic stuff that can be applied to the entire API.</p><pre><code class="language-swift">import Foundation

enum Server {}
</code></pre><p>Weâ€™re going to use UUID values as primary identifiers, so it seems like a good idea to add a <code>Field</code> extension with a static <code>uuid</code> function for this purpose. Weâ€™re also going to use image URLs so, letâ€™s define one more field inside the <code>Server+Fields.swift</code> extension. ðŸ¤”</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Server {

    enum Fields {

        static func uuid(
            required: Bool = true,
            description: String = "Unique identifier"
        ) -&gt; JSONSchema {
            .string(
                format: .extended(.uuid),
                required: required,
                description: description,
                example: "4DB59768-CDFA-4608-BA60-4673A3CB015E"
            )
        }

        static func url(
            required: Bool = true,
            description: String = "URL"
        ) -&gt; JSONSchema {
            .string(
                format: .extended(.uri),
                required: required,
                description: description,
                example: "https://placekitten.com/512/512"
            )
        }
    }
}
</code></pre><p>Weâ€™re going to use the fields inside the JSON objects, but we can also come up with a <code>Server+Parameters.swift</code> namespace to define generic path and query parameters that we can reuse inside the operations.</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Server {

    enum Parameters {

        static var page: OpenAPI.Parameter {
            let name = "page"
            return .init(
                name: name,
                context: .query,
                schema: .integer(
                    title: name,
                    minimum: (1, exclusive: false),
                    defaultValue: 1,
                    example: 1
                ),
                description: "Page offset of the list"
            )
        }

        static var size: OpenAPI.Parameter {
            let name = "size"
            return .init(
                name: name,
                context: .query,
                schema: .integer(
                    title: name,
                    minimum: (1, exclusive: false),
                    defaultValue: 50,
                    example: 50
                ),
                description: "Number of items per page"
            )
        }

        static var search: OpenAPI.Parameter {
            let name = "search"
            return .init(
                name: name,
                context: .query,
                schema: .string(
                    example: ""
                ),
                description: "Search with some value"
            )
        }

        static var order: OpenAPI.Parameter {
            .init(
                name: "order",
                context: .query,
                schema: .string(
                    allowedValues: "asc", "desc",
                    defaultValue: "asc",
                    example: "asc"
                ),
                description: "Order the results ascending or descending (asc, desc)"
            )
        }
    }
}
</code></pre><p>Same thing goes for the security schemes, in this case we just simply define a <code>bearerAuth</code> reference to a component, which weâ€™re going to implement inside the OpenAPI doc. ðŸ“„</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Server {

    enum Security {

        static let bearerAuth: [OpenAPI.SecurityRequirement] = [
            [
                .component(named: "bearerAuth"): []
            ]
        ]
    }
}

</code></pre><p>The very last thing seems like a bit complex, but itâ€™s just a generic error message and a list object that can contain other JSON elements. This is how you can generate the OpenAPI definition for that using static Swift helper functions:</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Server {

    enum Components {

        static var error: JSONSchema {
            .object(
                properties: [
                    "message": .string(
                        required: true,
                        description: "The user facing error message.",
                        example: "Something went wrong with the request."
                    ),
                    "details": .array(
                        items: .object(
                            properties: [
                                "key": .string(
                                    required: true,
                                    description: "The error key",
                                    example: "field"
                                ),
                                "message": .string(
                                    required: true,
                                    description: "The user facing error message",
                                    example: "Something is wrong with the field."
                                ),
                            ]
                        )
                    ),
                ]
            )
        }

        static func page() -&gt; JSONSchema {
            .object(
                properties: [
                    "size": .integer(
                        required: true,
                        maximum: (1000, exclusive: false),
                        minimum: (10, exclusive: false),
                        defaultValue: 50,
                        example: 25
                    ),
                    "current": .integer(
                        required: true,
                        minimum: (0, exclusive: false),
                        defaultValue: 0,
                        example: 12
                    ),
                    "total": .integer(
                        required: true,
                        minimum: (0, exclusive: false),
                        defaultValue: 0,
                        example: 42
                    ),
                ]
            )
        }

        static func list(
            reference: String,
            orderKeys: [String]? = nil
        ) -&gt; JSONSchema {
            .object(
                properties: [
                    "items": .array(
                        items: .reference(.component(named: reference))
                    ),
                    "metadata": .object(
                        properties: [
                            "page": Self.page(),
                            "items": .object(
                                properties: [
                                    "total": .integer(
                                        required: true,
                                        minimum: (0, exclusive: false),
                                        defaultValue: 0,
                                        example: 69
                                    )
                                ]
                            ),
                            "sort": .object(
                                properties: [
                                    "by": .string(
                                        required: false,
                                        description: "Sort the list by ascending or descending order",
                                        allowedValues: "asc", "desc",
                                        defaultValue: "asc"
                                    ),
                                    "order": .string(
                                        required: false,
                                        description: "Field key to order the list",
                                        allowedValues: orderKeys as? [AnyCodable]
                                    ),
                                ]
                            ),
                            "search": .string(
                                required: false,
                                description: "Search term"
                            ),
                        ]
                    ),
                ]
            )
        }
    }
}

</code></pre><p>Now that weâ€™re ready with the basic building blocks, letâ€™s start creating some actual endpoints. Iâ€™m going to show you how to create a complete REST API for a category object type and based on this you should be able to apply the very same pattern to other REST objects. ðŸ”„</p><p>Again, we start with a namespace, by using a Swift enum:</p><pre><code class="language-swift">import Foundation

enum Category {}

</code></pre><p>Next, we define some helpers for the fields of the category object. Note that we donâ€™t have to create a helper for the <code>id</code> field, because we already have that one in the <code>Server.Fields</code> namespace. Apart from the unique identifier, a category will only have a <code>name</code> field.</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Category {

    enum Fields {

        static func name(required: Bool = true) -&gt; JSONSchema {
            .string(
                required: required,
                description: "Name of the category",
                example: "Cat"
            )
        }
    }
}

</code></pre><p>By using the previously defined helpers, we can simply come up with the component structure for the Category model. I always like to separate the DTOs (Date Transfer Object) for every REST call, so in our case:</p><ul><li>reference - for references in other objects</li><li>list - <code>GET /models/</code></li><li>detail - <code>GET /models/{id}</code></li><li>create - <code>POST /models/</code></li><li>update - <code>PUT /models/{id}</code></li><li>patch - <code>PATCH /models/{id}</code></li></ul><p>This might looks like an overkill, but on the long term itâ€™s worth to separate these contexts (or maybe not, who knowsâ€¦ ðŸ˜…).</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Category {

    enum Components {

        static var reference: JSONSchema {
            .object(
                properties: [
                    "id": Server.Fields.uuid(),
                    "name": Fields.name(),
                ]
            )
        }

        static var list: JSONSchema {
            .object(
                properties: [
                    "id": Server.Fields.uuid(),
                    "name": Fields.name(),
                ]
            )
        }

        static var detail: JSONSchema {
            .object(
                properties: [
                    "id": Server.Fields.uuid(),
                    "name": Fields.name(),
                ]
            )
        }

        static var create: JSONSchema {
            .object(
                properties: [
                    "name": Fields.name()
                ]
            )
        }

        static var update: JSONSchema {
            .object(
                properties: [
                    "name": Fields.name()
                ]
            )
        }

        static var patch: JSONSchema {
            .object(
                properties: [
                    "name": Fields.name(required: false)
                ]
            )
        }
    }

}
</code></pre><p>Before we deal with the REST operations, we still have to define some parameters. Weâ€™re going to create a <code>categoryId</code> path parameter for category id references, and a sort parameter for the list operation, this way we can specify the allowed sort keys (<code>name</code> only in this case).</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Category {

    enum Parameters {

        static var id: OpenAPI.Parameter {
            .init(
                name: "categoryId",
                context: .path,
                schema: Server.Fields.uuid()
            )
        }

        static var sort: OpenAPI.Parameter {
            return .init(
                name: "sort",
                context: .query,
                schema: .string(
                    allowedValues: "name",
                    defaultValue: "name",
                    example: "name"
                ),
                description: "Sort with the given value"
            )
        }
    }
}
</code></pre><p>Building the operations for the REST endpoints is pretty straightforward if you are already familiar with the <a href="https://swagger.io/specification/" target="_blank">OpenAPI specification</a>. Weâ€™re not going to explain that in this tutorial, but hereâ€™s the complete example, to serve as a pattern for you.</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30

extension Category {

    enum Operations {

        static var list: OpenAPI.Operation {
            .init(
                tags: ["Categories"],
                summary: "Find categories",
                description: "List categories",
                operationId: "listCategories",
                parameters: [
                    .ref("page"),
                    .ref("size"),
                    .ref("search"),
                    .ref("categorySort"),
                    .ref("order"),
                ],
                responses: [
                    200: .response(
                        description: "List of categories",
                        content: [
                            .json: .init(
                                schema: Server.Components.list(
                                    reference: "CategoryList"
                                )
                            )
                        ]
                    ),
                    400: .ref("400"),
                    401: .ref("401"),
                    403: .ref("403"),
                ],
                security: Server.Security.bearerAuth
            )
        }

        static var create: OpenAPI.Operation {
            .init(
                tags: ["Categories"],
                summary: "Create a category",
                description: "Creates a new category object",
                operationId: "createCategory",
                requestBody: .init(content: [
                    .json: .ref("CategoryCreate")
                ]),
                responses: [
                    200: .response(
                        description: "The details of a category object",
                        content: [
                            .json: .ref("CategoryDetail")
                        ]
                    ),
                    400: .ref("400"),
                    401: .ref("401"),
                    403: .ref("403"),
                ],
                security: Server.Security.bearerAuth
            )
        }

        static var bulkDelete: OpenAPI.Operation {
            .init(
                tags: ["Categories"],
                summary: "Bulk delete categories",
                description: "Removes multiple categories objects at once",
                operationId: "deleteCategories",
                requestBody: .init(content: [
                    .json: .init(
                        schema: .array(
                            items: Server.Fields.uuid()
                        )
                    )
                ]),
                responses: [
                    204: .ref("204"),
                    400: .ref("400"),
                    401: .ref("401"),
                    403: .ref("403"),
                ],
                security: Server.Security.bearerAuth
            )
        }

        // MARK: - currency id

        static var detail: OpenAPI.Operation {
            .init(
                tags: ["Categories"],
                summary: "Category details",
                description: "Get the details of a category object",
                operationId: "getCategory",
                parameters: [
                    .ref("categoryId")
                ],
                responses: [
                    200: .response(
                        description: "The details of a category object",
                        content: [
                            .json: .ref("CategoryDetail")
                        ]
                    ),
                    400: .ref("400"),
                    401: .ref("401"),
                    403: .ref("403"),
                    404: .ref("404"),
                ],
                security: Server.Security.bearerAuth
            )
        }

        static var update: OpenAPI.Operation {
            .init(
                tags: ["Categories"],
                summary: "Update a category object",
                description: "Updates an entire category object",
                operationId: "updateCategory",
                parameters: [
                    .ref("categoryId")
                ],
                requestBody: .init(content: [
                    .json: .ref("CategoryUpdate")
                ]),
                responses: [
                    200: .response(
                        description:
                            "The details of the patched category object",
                        content: [
                            .json: .ref("CategoryDetail")
                        ]
                    ),
                    400: .ref("400"),
                    401: .ref("401"),
                    403: .ref("403"),
                ],
                security: Server.Security.bearerAuth
            )
        }

        static var patch: OpenAPI.Operation {
            .init(
                tags: ["Categories"],
                summary: "Patch a category object",
                description: "Patch the properties of a given category object",
                operationId: "patchCategory",
                parameters: [
                    .ref("categoryId")
                ],
                requestBody: .init(content: [
                    .json: .ref("CategoryPatch")
                ]),
                responses: [
                    200: .response(
                        description:
                            "The details of the patched category object",
                        content: [
                            .json: .ref("CategoryDetail")
                        ]
                    ),
                    400: .ref("400"),
                    401: .ref("401"),
                    403: .ref("403"),
                    404: .ref("404"),
                ],
                security: Server.Security.bearerAuth
            )
        }

        static var delete: OpenAPI.Operation {
            .init(
                tags: ["Categories"],
                summary: "Delete a category object",
                description:
                    "Removes a category object using the unique identifier",
                operationId: "deleteCategory",
                parameters: [
                    .ref("categoryId")
                ],
                responses: [
                    204: .ref("204"),
                    400: .ref("400"),
                    401: .ref("401"),
                    403: .ref("403"),
                    404: .ref("404"),
                ],
                security: Server.Security.bearerAuth
            )
        }
    }
}

</code></pre><p>As you can see there are some <code>.ref()</code> calls inside the code and we still have to create the entire document specification including the reference points defined as components. Weâ€™re going to do this now by creating an extension over the <code>OpenAPI.Document</code> type. ðŸ¥³</p><pre><code class="language-swift">import OpenAPIKit30

extension OpenAPI.Document {

    static var definition: OpenAPI.Document {
        .init(
            info: .init(
                title: "Swagger Petstore - written in Swift",
                description:
                    "This is a sample Pet Store Server based on the OpenAPI 3.0 specification generated using Swift & OpenAPIKit.",
                contact: .init(
                    name: "Binary Birds",
                    url: .init(string: "https://binarybirds.com")!,
                    email: "info@binarybirds.com"
                ),
                version: "1.0.0"
            ),
            servers: [
                .init(
                    url: .init(string: "http://127.0.0.1:8080")!,
                    description: "dev"
                ),
                .init(
                    url: .init(string: "http://127.0.0.1:8081")!,
                    description: "live"
                ),
            ],
            paths: [
                "/categories": .init(
                    get: Category.Operations.list,
                    post: Category.Operations.create,
                    delete: Category.Operations.bulkDelete
                ),
                "/categories/{categoryId}": .init(
                    get: Category.Operations.detail,
                    put: Category.Operations.update,
                    delete: Category.Operations.delete,
                    patch: Category.Operations.patch
                ),
            ],
            components: .init(
                schemas: [
                    "ErrorResponse": Server.Components.error,

                    "CategoryReference": Category.Components.reference,
                    "CategoryList": Category.Components.list,
                    "CategoryDetail": Category.Components.detail,
                    "CategoryCreate": Category.Components.create,
                    "CategoryUpdate": Category.Components.update,
                    "CategoryPatch": Category.Components.patch,

                ],
                responses: [
                    "204": .init(description: "No content"),
                    "400": .init(
                        description: "Bad request",
                        content: [
                            .json: .init(
                                schema: .reference(
                                    .component(named: "ErrorResponse")
                                )
                            )
                        ]
                    ),
                    "401": .init(
                        description: "Unauthorized",
                        content: [
                            .json: .init(
                                schema: .reference(
                                    .component(named: "ErrorResponse")
                                )
                            )
                        ]
                    ),
                    "403": .init(
                        description: "Forbidden",
                        content: [
                            .json: .init(
                                schema: .reference(
                                    .component(named: "ErrorResponse")
                                )
                            )
                        ]
                    ),
                    "404": .init(
                        description: "Not found",
                        content: [
                            .json: .init(
                                schema: .reference(
                                    .component(named: "ErrorResponse")
                                )
                            )
                        ]
                    ),
                ],
                parameters: [
                    "categoryId": Category.Parameters.id,
                    "categorySort": Category.Parameters.sort,

                    "page": Server.Parameters.page,
                    "size": Server.Parameters.size,
                    "search": Server.Parameters.search,
                    "order": Server.Parameters.order,
                ],
                examples: [:],
                requestBodies: [:],
                headers: [:],
                securitySchemes: [
                    "bearerAuth": .init(
                        type: .http(
                            scheme: "bearer",
                            bearerFormat: "token"
                        ),
                        description: "Authorization header using a Bearer token"
                    )
                ]
            ),
            tags: [
                .init(
                    name: "Categories",
                    description: "Pet categories, such as cat, dog, etc."
                ),
            ]
        )
    }
}

</code></pre><p>Finally in the <code>main.swift</code> file weâ€™re going to generate both the YAML and the JSON output.</p><pre><code class="language-swift">import Foundation
import OpenAPIKit30
import Yams

let basePath =
    "/"
    + #file
    .split(separator: "/")
    .dropLast(3)
    .joined(separator: "/")
    .appending("/dist")

if !FileManager.default.fileExists(atPath: basePath) {
    try FileManager.default.createDirectory(
        atPath: basePath,
        withIntermediateDirectories: true
    )
}

let doc = OpenAPI.Document.definition
let yamlEncoder = YAMLEncoder()
let yamlData = try yamlEncoder.encode(doc)
let yamlPath = "\(basePath)/swagger.yaml"
try yamlData.write(
    to: URL(fileURLWithPath: yamlPath),
    atomically: true,
    encoding: .utf8
)

let jsonEncoder = JSONEncoder()
jsonEncoder.outputFormatting = [
    .prettyPrinted,
    .withoutEscapingSlashes,
]
let jsonData = try jsonEncoder.encode(doc)
let jsonPath = "\(basePath)/swagger.json"
try jsonData.write(
    to: URL(fileURLWithPath: jsonPath),
    options: .atomic
)

</code></pre><p>Of course we have a working template repository that you can <a href="https://github.com/binarybirds/swagger-petstore" target="_blank">download for free</a>. This repository contains some more common patterns, including N to many relations and some other useful stuff, that you might encounter when you try to build an API specification for your backend service. ðŸ˜Š</p>
                </section>
                
                
            </article>
        </div>
        <div>
            <aside>
    
            <div class="author-list">
                    <a href="http://127.0.0.1:3000/blog/authors/tibor-bodecs/">
                    <img class="medium rounded" src="http://127.0.0.1:3000/assets/blog/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor BÃ¶decs">
                    </a>
            </div>
            <div class="tag-list">
                    <a href="http://127.0.0.1:3000/blog/open-api/"><small>OpenAPI</small></a>
                <a href="http://127.0.0.1:3000/blog/swift/"><small>Swift</small></a>
            </div>
            
            <h4>On this page</h4>
            <ul>
                <li class="first-level">
                    <a href="#getting-started">Getting started</a>
                    <ul>
                    </ul>
                </li>
            </ul>
            </aside>
        </div>
    </div>
    </div>
    
    <section class="primary">
        <div class="wrapper">
            <header>
            <h2>Related posts</h2>
            </header>
            <div class="grid grid-221">
                    <div class="card post">
                        <span class="featured">featured</span>
                        <div class="author-list">
                                <a href="http://127.0.0.1:3000/blog/authors/tibor-bodecs/">
                                <img class="small rounded" src="http://127.0.0.1:3000/assets/blog/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor BÃ¶decs">
                                </a>
                        </div>
                    
                        <div class="meta">
                            <time datetime="2023-06-07 14:57:12">2023-06-07 14:57:12</time>
                        </div>
                        
                        <h3><a href="http://127.0.0.1:3000/blog/beginners-guide-to-swift-macros/">Beginner&#39;s guide to Swift macros</a></h3>
                        <p>Learn how to create and publish your very first macro using SPM and the brand new Macro APIs introduced in Swift 5.9.</p>
                        
                        
                        <div class="tag-list">
                                <a href="http://127.0.0.1:3000/blog/swift/"><small>Swift</small></a>
                        </div>
                    </div>
                <div class="card post">
                        <div class="author-list">
                                <a href="http://127.0.0.1:3000/blog/authors/tibor-bodecs/">
                                <img class="small rounded" src="http://127.0.0.1:3000/assets/blog/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor BÃ¶decs">
                                </a>
                        </div>
                    
                        <div class="meta">
                            <time datetime="2023-07-06 16:15:54">2023-07-06 16:15:54</time>
                        </div>
                        
                        <h3><a href="http://127.0.0.1:3000/blog/how-to-write-openapi-specs-using-swift-and-openapi-kit/">How to write OpenAPI specs using Swift and OpenAPIKit?</a></h3>
                        <p>In this tutorial I&#39;ll show you how to build OpenAPI 3.0+ specifications efficiently using Swift &amp; OpenAPIKit.</p>
                        
                        
                        <div class="tag-list">
                                <a href="http://127.0.0.1:3000/blog/open-api/"><small>OpenAPI</small></a>
            <a href="http://127.0.0.1:3000/blog/swift/"><small>Swift</small></a>
                        </div>
                    </div>
                <div class="card post">
                        <div class="author-list">
                                <a href="http://127.0.0.1:3000/blog/authors/gabor-lengyel/">
                                <img class="small rounded" src="http://127.0.0.1:3000/assets/blog/authors/gabor-lengyel/gabor-lengyel.png" alt="GÃ¡bor Lengyel">
                                </a>
                        </div>
                    
                        <div class="meta">
                            <time datetime="2023-05-18 17:36:12">2023-05-18 17:36:12</time>
                        </div>
                        
                        <h3><a href="http://127.0.0.1:3000/blog/push-notifications-with-swift-server-side/">Sending push notifications using server side Swift in 2023</a></h3>
                        <p>Learn how to send push notifications with Swift on the server side using the Google FCM API and the APN Swift library.</p>
                        
                        
                        <div class="tag-list">
                                <a href="http://127.0.0.1:3000/blog/swift/"><small>Swift</small></a>
                        </div>
                    </div>
                <div class="card post">
                        <div class="author-list">
                                <a href="http://127.0.0.1:3000/blog/authors/tibor-bodecs/">
                                <img class="small rounded" src="http://127.0.0.1:3000/assets/blog/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor BÃ¶decs">
                                </a>
                        </div>
                    
                        <div class="meta">
                            <time datetime="2023-04-24 18:32:25">2023-04-24 18:32:25</time>
                        </div>
                        
                        <h3><a href="http://127.0.0.1:3000/blog/static-site-generation-with-the-power-of-swift-and-toucan/">Static site geneneration with the power of Swift and Toucan</a></h3>
                        <p>Toucan is a lightweight static site generator written in Swift. This article will guide you through the process of creating your own website using it.</p>
                        
                        
                        <div class="tag-list">
                                <a href="http://127.0.0.1:3000/blog/product-updates/"><small>Product updates</small></a>
            <a href="http://127.0.0.1:3000/blog/swift/"><small>Swift</small></a>
                        </div>
                    </div>
            </div>
        </div>
    </section>
    
    <section class="book">
      <div class="wrapper">
          <header>
              <h2>Swift on the server</h2>
              <p>We specialize on server side Swift development. We are so dedicated and enthusiastic that we even wrote a book on the topic.</p>
          </header>
          <div class="grid grid-211">
              <picture>
                <img alt="Practical Server Side Swift Cover" src="/images/practical-server-side-swift-cover.png"/>
              </picture>
              
              <div class="info">
                <h3>Practical Server-Side Swift</h3>
                <p>Swift on the server is an amazing new opportunity to build fast, safe and scalable backend apps. Write your very first web-based application by using your favorite programming language. Learn how to build a modular blog engine using the latest version of the Vapor 4 framework. This book will help you to design and create modern APIs that'll allow you to share code between the server side and iOS. Start becoming a full-stack Swift developer.</p>
                <p><a href="#">Download sample</a></p>
                <p><a class="button" href="https://theswiftdev.gumroad.com/l/practical-server-side-swift" target="_blank">Get it on Gumroad</a></p>
              </div>
          </div>
          
          
        
      </div>
    </section>
    
    </main>

    <div id="footer-container">
        <footer class="wrapper">
            <div class="grid grid-211">
                <div>
                    <picture>
                        <source
                            srcset="http://127.0.0.1:3000/images/logos/logo~dark.png"
                            media="(prefers-color-scheme: dark)"
                            >
                        <img
                            src="http://127.0.0.1:3000/images/logos/logo.png"
                            alt="Logo of Binary Birds"
                            title="Binary Birds"
                            >
                    </picture>
                    <h2>Binary Birds</h2>
                    <p>Swift application development and consulting.<br>Secure, efficient, scalable solutions.</p>
                </div>
                <div class="links">
                    <div class="external">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5" />
                        </svg>
                    </div>
                    <div class="contact">
                        <h3>Contact</h3>
                        <p>
                        Binary Birds Kft.<br>
                        <a href="mailto:info@binarybirds.com">
                            info@binarybirds.com
                        </a>
                        </p>
                    </div>
                </div>
            </div>
                    
            <nav>
                <ul>
                    <li><a href="http://127.0.0.1:3000/">Home</a></li>
                    <li><a href="http://127.0.0.1:3000/development">Development</a></li>
                    <li><a href="http://127.0.0.1:3000/consulting">Consulting</a></li>
                    <li><a href="http://127.0.0.1:3000/blog">Blog</a></li>
                </ul>
            </nav>
    
            <div id="copyright">Binary Birds Â© 2022- &middot; All Rights Reserved</div>
    
        </footer>
    </div>

    
    <script src="/js/favicon.js"></script>
    
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KQCKHXQ8"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
</body>
</html>
